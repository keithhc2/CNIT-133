<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="description" content="Keith Chan's Homework #6 for CNIT 133">
	<title>Part 2 - Counting Character Occurrences</title>
	<link rel="stylesheet" href="../stylesheet.css" type="text/css" />
</head>
<body style = "background-color: #d0d0ff;">

<h2>Part 2 - Counting Character Occurrences</h2>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>

	$(document).ready(function(){
		document.getElementById("submitButton").addEventListener("click", processText);
	});

	function processText(){
		var resultCounter = 0;
		var userInputString = document.getElementById("userInput").value;
		var charToSearchFor = document.getElementById("charInput").value;

		if (charToSearchFor.length === 0 || userInputString.length === 0){ //Either input box was empty.
			document.getElementById("errorMessage").innerHTML = "Please enter something into both input boxes.";
		}
		if (charToSearchFor.length > 1){
			document.getElementById("errorMessage").innerHTML = "Please search for only one character at a time.";
			document.getElementById("results").innerHTML = " ";
		}
		else{ //Input boxes were fine
			for (i = 0; i < userInputString.length; i++){
				if (userInputString.charAt(i).toLowerCase() === charToSearchFor.toLowerCase()){
					resultCounter++;
				}
			}
			if (resultCounter === 0){ //Input was fine, but no characters found
				document.getElementById("results").innerHTML = " ";
				makeWindow(charToSearchFor);
			}
			else{
				var resultString = (resultCounter === 1 ? "Your character appeared 1 time!" :
														 "Your character appeared " + resultCounter + " times!");
				document.getElementById("results").innerHTML = resultString;
			}
		}
	}
	function makeWindow(searchChar){
		var windowText = "<html>\n";
		windowText += "<head>\n";
		windowText += "<title>Popup Window for Homework 6 - Part 2</title>\n";
		windowText += "<style>\n";
		windowText += "body { background-color: #d0d0ff }\n";
		windowText += "</style>\n"
		windowText += "</head>\n";
		windowText += "<body>\n";
		windowText += "<p style = 'font-size:20px;'>Search character \"" + searchChar + "\" not found in text string!</p>\n";
		windowText += "<input type = 'button' value = 'Close Window' onclick = 'window.close()'>\n";
		windowText += "</body>\n";
		windowText += "</html>\n";
		var newWindow = window.open("", "errorWindow", "top=300,left=600,width=300,height=100");
		newWindow.focus();
		newWindow.document.write(windowText);
		newWindow.document.close();
	}
</script>


<label for = "userInput">Enter a couple lines of text into this box:</label>
<br>
<textarea id = "userInput" name = "userInput" rows = "4" cols = "55">
</textarea>
<br>
<label for = "userInput">Enter a character to search for:</label>
<input type = "text" id = "charInput">
<input type = "button" value = "Submit" id = "submitButton">
<br>
<br>
<div id = "errorMessage"></div>
<br>
<label for = "results">Results:</label>
<br>
<textarea id = "results" name = "results" disabled style = "background-color: #fff;" cols = "55">
</textarea>

<h2>Other parts of homework 6:</h2>
<div class = "links">
	<ul>
		<li><a href = "homework6-part1.html">Part 1 - Using Math Operations for Rounding</a></li>
		<li><a href = "homework6-part2.html">Part 2 - Counting Character Occurrences</a></li>
		<li><a href = "homework6-part3.html">Part 3 - Phone Number Processing</a></li>
	</ul>
</div>
<a href = "../index.html">Back to the main page</a>
</body>

</html>